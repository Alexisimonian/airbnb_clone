<!DOCTYPE html>
<html lang="en">
  <!-- Head -->
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    />
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./account.css" />
    <title>Your profile</title>
  </head>

  <!-- Body -->
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="/">
        <img
          src="./images/logo_red.png"
          alt="airbnb logo red"
          width="102"
          height="32"
        />
      </a>

      <!-- Navbar buttons -->
      <div class="ml-auto mr-5 pl-auto pr-5">
        <ul class="navbar-nav">
          <li class="nav-item pr-5">
            <a class="btn btn-light ml-auto" role="button" id="createHome">
              <strong>Become a host</strong></a
            >
          </li>
          <li class="nav-item pr-5">
            <div class="dropdown">
              <button
                class="btn btn-default p-2"
                id="logdropdown"
                type="button"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <span class="fa fa-bars"></span>
              </button>
              <div class="dropdown-menu" aria-labelledby="logdropdown">
                <a class="dropdown-item" id="logbtn"></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Account information -->
    <div id="#account-infos">
      <table id="userinfo">
        <!-- Avatar section collapsed -->
        <tr class="field expand">
          <td class="first-row">
            <div class="preclick">
              <div class="identifier">PHOTO:</div>
              <div class="info" id="account_photo">IMG</div>
            </div>

            <!-- Avatar section expanded -->
            <div class="postclick" hidden>
              <form
                class="modav needs-validation"
                action="/change/account/avatar"
                method="POST"
                novalidate
              >
                <div class="form-group">
                  <input type="file" name="avatar" id="avatar" required />
                </div>
                <button type="submit">Save Changes</button>
              </form>
            </div>
          </td>

          <td class="modlink-box">
            <a href="#" class="modlink">Edit</a>
          </td>
        </tr>

        <!-- Username section collapsed -->
        <tr class="field expand">
          <td>
            <div class="preclick">
              <div class="identifier">USERNAME:</div>
              <div class="info" id="account_name">NAME</div>
            </div>

            <!-- Username section expanded -->
            <div class="postclick" hidden>
              <form
                class="modtext needs-validation"
                action="/change/account/infos"
                method="POST"
                novalidate
              >
                <div class="form-group">
                  <label for="username">Username</label>
                  <input
                    class="form-control"
                    type="text"
                    name="name"
                    id="name"
                    pattern=".{4,}"
                    required
                  />
                  <div class="invalid-feedback" id="invalid-username">
                    Username must be 4 characters or more
                  </div>
                </div>

                <button type="submit">Save Changes</button>
              </form>
            </div>
          </td>

          <td class="modlink-box">
            <a href="#" class="modlink">Edit</a>
          </td>
        </tr>

        <!-- Email address section collapsed -->
        <tr class="field expand">
          <td>
            <div class="preclick">
              <div class="identifier">EMAIL ADDRESS:</div>
              <div class="info" id="account_email">EMAIL</div>
            </div>

            <!-- Email section expanded -->
            <div class="postclick" hidden>
              <form
                class="modtext needs-validation"
                action="/change/account/infos"
                method="post"
                novalidate
              >
                <div class="form-group">
                  <label for="email">Email Address</label>
                  <input
                    class="form-control"
                    type="text"
                    name="email"
                    id="email"
                    pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                    required
                  />
                  <div class="invalid-feedback" id="invalid-email">
                    Must be a valid email address.
                  </div>
                </div>

                <div class="form-group">
                  <label for="password">Password</label>
                  <input
                    class="form-control"
                    type="password"
                    name="password"
                    id="password"
                  />
                  <div class="invalid-feedback">Password incorrect</div>
                </div>

                <button type="submit">Save Changes</button>
              </form>
            </div>
          </td>

          <td class="modlink-box">
            <a href="#" class="modlink">Edit</a>
          </td>
        </tr>

        <!-- Password section collapsed -->
        <tr class="field expand">
          <td>
            <div class="preclick">
              <div class="identifier">PASSWORD:</div>
              <div class="info" id="password">**********</div>
            </div>

            <!-- Password section expanded -->
            <div class="postclick" id="passwordchange" hidden>
              <form
                class="modtext needs-validation"
                action="/change/account/infos"
                method="POST"
                novalidate
              >
                <div class="form-group">
                  <label for="password">Current password</label>
                  <input
                    class="form-control"
                    type="password"
                    name="password"
                    id="password"
                    required
                  />
                  <div class="invalid-feedback">Password incorrect</div>
                </div>

                <div class="form-group">
                  <label for="confirmpassword">New password</label>
                  <input
                    class="form-control"
                    type="password"
                    name="newpassword"
                    id="newpassword"
                    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                    required
                  />
                  <div class="invalid-feedback">
                    Must contain at least 8 characters, 1 number and 1 uppercase
                    and lowercase letter.
                  </div>
                </div>

                <div class="form-group">
                  <label for="currentpassword">Confirm new password</label>
                  <input
                    class="form-control"
                    type="password"
                    name="confirmpassword"
                    id="confirmpassword"
                    required
                  />
                  <div class="invalid-feedback">Passwords must match</div>
                </div>

                <button type="submit">Save Changes</button>
              </form>
            </div>
          </td>

          <td class="modlink-box">
            <a href="#" class="modlink">Edit</a>
          </td>
        </tr>
      </table>

      <!-- Previous and incoming trips -->
      <table id="userbookings">
        <tr class="field" id="incomingtrip">
          <th>INCOMING TRIPS:</th>
        </tr>
      </table>

      <!-- Delete account button -->
      <table id="delete-account">
        <tr>
          <td id="delete-account-box">
            <button
              class="btn btn-danger"
              data-toggle="modal"
              data-target="#delete-confirmation"
            >
              Delete account
            </button>
          </td>
        </tr>
      </table>
    </div>

    <!-- Are you sure? delete modal -->
    <div
      class="modal fade"
      id="delete-confirmation"
      tabindex="-1"
      role="dialog"
      aria-labelledby="delete-account-modal"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3><strong> Are you sure ? </strong></h3>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            ></button>
            <span aria-hidden="true">&times;</span>
          </div>
          <div class="modal-body">
            All your data will be <strong>permanently</strong> lost. <br />
            We don't keep anything !
          </div>
          <div class="modal-footer">
            <button class="btn btn-default" data-dismiss="modal">Close</button>
            <button class="btn btn-danger" id="delete-account-btn">
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Are you sure? unbook modal -->
    <div
      class="modal fade"
      id="unbook-confirmation"
      tabindex="-1"
      role="dialog"
      aria-labelledby="unbook-modal"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h3><strong> Are you sure ? </strong></h3>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            ></button>
            <span aria-hidden="true">&times;</span>
          </div>
          <div class="modal-body">
            Are you sure you want to cancel this booking?
          </div>
          <div class="modal-footer">
            <button class="btn btn-default" data-dismiss="modal">Close</button>
            <button class="btn btn-danger" id="unbook-btn">unbook</button>
          </div>
        </div>
      </div>
    </div>

    <!-- External sources -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script
      src="/node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"
      type="text/javascript"
    ></script>
    <script
      src="/node_modules/blueimp-file-upload/js/jquery.iframe-transport.js"
      type="text/javascript"
    ></script>
    <script
      src="/node_modules/blueimp-file-upload/js/jquery.fileupload.js"
      type="text/javascript"
    ></script>
    <script
      src="/node_modules/cloudinary-jquery-file-upload/cloudinary-jquery-file-upload.js"
      type="text/javascript"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="account.js"></script>
  </body>
</html>
